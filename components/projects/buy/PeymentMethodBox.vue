<template>
  <!--title-->
  <div class="bg-white mt-6 rounded-t-xl">
    <p class="w-100 text-center text-zinc-500 py-3 text-[18px]">انتخاب شیوه ی پرداخت</p>
  </div>
  <!--box--->
  <div class="w-100 p-4 mt-3 bg-white rounded-b-xl">
    <div class="flex items-center mt-2 justify-start gap-4 px-5 text-[18px] gray-fill fill-active text-zinc-700 mb-10" @click="onlinePaymetntSelect" ref="onlinePaymentSvg" dir="rtl">
      <div class="w-[18px] rounded-full h-[18px] border bg-sky-custom border-zinc-400" ref="onlineCircle"></div>
      <svg xmlns="http://www.w3.org/2000/svg" width="37" height="26" viewBox="0 0 37 26" fill="none">
        <path d="M34.5711 0H1.8857C1.38558 0 0.905945 0.198671 0.552308 0.552308C0.198671 0.905945 0 1.38558 0 1.8857V23.2569C0 23.7571 0.198671 24.2367 0.552308 24.5903C0.905945 24.944 1.38558 25.1426 1.8857 25.1426H34.5711C35.0712 25.1426 35.5509 24.944 35.9045 24.5903C36.2581 24.2367 36.4568 23.7571 36.4568 23.2569V1.8857C36.4568 1.38558 36.2581 0.905945 35.9045 0.552308C35.5509 0.198671 35.0712 0 34.5711 0ZM1.25713 6.28566H35.1997V7.54279H1.25713V6.28566ZM1.8857 1.25713H34.5711C34.7378 1.25713 34.8977 1.32336 35.0156 1.44123C35.1335 1.55911 35.1997 1.71899 35.1997 1.8857V5.02853H1.25713V1.8857C1.25713 1.71899 1.32336 1.55911 1.44123 1.44123C1.55911 1.32336 1.71899 1.25713 1.8857 1.25713ZM34.5711 23.8855H1.8857C1.71899 23.8855 1.55911 23.8193 1.44123 23.7014C1.32336 23.5835 1.25713 23.4236 1.25713 23.2569V8.79992H35.1997V23.2569C35.1997 23.4236 35.1335 23.5835 35.0156 23.7014C34.8977 23.8193 34.7378 23.8855 34.5711 23.8855Z" fill="#1B9EB2"/>
        <path d="M11.9448 16.9713H4.402C4.2353 16.9713 4.07542 17.0375 3.95754 17.1554C3.83966 17.2733 3.77344 17.4332 3.77344 17.5999C3.77344 17.7666 3.83966 17.9265 3.95754 18.0443C4.07542 18.1622 4.2353 18.2284 4.402 18.2284H11.9448C12.1115 18.2284 12.2714 18.1622 12.3893 18.0443C12.5071 17.9265 12.5734 17.7666 12.5734 17.5999C12.5734 17.4332 12.5071 17.2733 12.3893 17.1554C12.2714 17.0375 12.1115 16.9713 11.9448 16.9713Z" fill="#1B9EB2"/>
        <path d="M11.9448 20.1141H4.402C4.2353 20.1141 4.07542 20.1804 3.95754 20.2982C3.83966 20.4161 3.77344 20.576 3.77344 20.7427C3.77344 20.9094 3.83966 21.0693 3.95754 21.1872C4.07542 21.305 4.2353 21.3713 4.402 21.3713H11.9448C12.1115 21.3713 12.2714 21.305 12.3893 21.1872C12.5071 21.0693 12.5734 20.9094 12.5734 20.7427C12.5734 20.576 12.5071 20.4161 12.3893 20.2982C12.2714 20.1804 12.1115 20.1141 11.9448 20.1141Z" fill="#1B9EB2"/>
        <path d="M30.1768 16.3427C29.7253 16.3449 29.2828 16.4687 28.8957 16.701C28.5086 16.9332 28.1912 17.2654 27.9768 17.6627C27.7109 17.1702 27.2884 16.7805 26.7761 16.5553C26.2638 16.33 25.6909 16.2822 25.1484 16.4193C24.6058 16.5564 24.1244 16.8706 23.7806 17.3121C23.4367 17.7537 23.25 18.2973 23.25 18.8569C23.25 19.4166 23.4367 19.9602 23.7806 20.4018C24.1244 20.8433 24.6058 21.1575 25.1484 21.2946C25.6909 21.4317 26.2638 21.3838 26.7761 21.1586C27.2884 20.9334 27.7109 20.5437 27.9768 20.0512C28.1881 20.4427 28.4996 20.7712 28.8794 21.003C29.2591 21.2348 29.6936 21.3617 30.1384 21.3707C30.5833 21.3797 31.0225 21.2705 31.4114 21.0542C31.8002 20.8379 32.1247 20.5224 32.3517 20.1397C32.5787 19.757 32.7001 19.321 32.7035 18.8761C32.7069 18.4312 32.5921 17.9933 32.371 17.6072C32.1498 17.2212 31.8302 16.9007 31.4447 16.6785C31.0592 16.4564 30.6217 16.3405 30.1768 16.3427ZM25.7768 20.1141C25.5282 20.1141 25.2851 20.0403 25.0784 19.9022C24.8716 19.7641 24.7105 19.5677 24.6154 19.338C24.5202 19.1083 24.4953 18.8555 24.5438 18.6117C24.5923 18.3678 24.7121 18.1438 24.8879 17.968C25.0637 17.7922 25.2877 17.6725 25.5315 17.624C25.7754 17.5755 26.0282 17.6004 26.2579 17.6955C26.4876 17.7907 26.6839 17.9518 26.8221 18.1585C26.9602 18.3653 27.0339 18.6083 27.0339 18.8569C27.0339 19.1904 26.9015 19.5101 26.6657 19.7459C26.43 19.9816 26.1102 20.1141 25.7768 20.1141ZM30.1768 20.1141C29.9281 20.1141 29.6851 20.0403 29.4783 19.9022C29.2716 19.7641 29.1105 19.5677 29.0153 19.338C28.9202 19.1083 28.8953 18.8555 28.9438 18.6117C28.9923 18.3678 29.112 18.1438 29.2878 17.968C29.4636 17.7922 29.6876 17.6725 29.9315 17.624C30.1754 17.5755 30.4281 17.6004 30.6578 17.6955C30.8876 17.7907 31.0839 17.9518 31.222 18.1585C31.3602 18.3653 31.4339 18.6083 31.4339 18.8569C31.4339 19.1904 31.3014 19.5101 31.0657 19.7459C30.8299 19.9816 30.5102 20.1141 30.1768 20.1141Z" fill="#1B9EB2"/>
      </svg>
      <div>
        <p>پرداخت اینترنتی</p>
        <p class="text-[12px]">
          پرداخت آنلاین از طریق کلیه کارت های عضو شتاب
        </p>
      </div>
    </div>

    <div class="flex items-center mt-2 justify-start gap-4 px-5 pb-5 text-[18px] text-zinc-700" ref="walletSvg" dir="rtl" @click="walletPaymetntSelect">
      <div class="w-[18px] rounded-full h-[18px] border border-[3px] border-zinc-400" ref="walletCircle" ></div>
      <svg xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 33 33" fill="none">
        <g id="Wallet">
          <path id="Vector" d="M4.66372 30.2994L5.08391 29.6137L4.66372 30.2994ZM2.15624 27.7919L2.84193 27.3717L2.15624 27.7919ZM30.2985 27.7919L29.6128 27.3717L30.2985 27.7919ZM27.791 30.2994L27.3708 29.6137L27.791 30.2994ZM27.791 6.71423L27.3708 7.39992L27.791 6.71423ZM30.2985 9.22171L29.6128 9.6419L30.2985 9.22171ZM4.66372 6.71423L5.08391 7.39992L4.66372 6.71423ZM2.15624 9.22171L2.84193 9.6419L2.15624 9.22171ZM26.0658 1.86798L26.6462 1.31129V1.31129L26.0658 1.86798ZM3.83845 2.39104L4.32402 3.0321H4.32402L3.83845 2.39104ZM2.33495 3.9585L2.99473 4.4183L2.33495 3.9585ZM26.8606 5.79297H27.6648L27.6648 5.789L26.8606 5.79297ZM25.8939 18.3444C26.3381 18.3444 26.6981 17.9843 26.6981 17.5402C26.6981 17.096 26.3381 16.736 25.8939 16.736V18.3444ZM21.7511 16.736C21.307 16.736 20.9469 17.096 20.9469 17.5402C20.9469 17.9843 21.307 18.3444 21.7511 18.3444V16.736ZM13.9488 6.3992H18.5059V4.79081H13.9488V6.3992ZM18.5059 30.6144H13.9488V32.2228H18.5059V30.6144ZM13.9488 30.6144C11.447 30.6144 9.62713 30.6135 8.20262 30.4781C6.79007 30.3438 5.84952 30.0828 5.08391 29.6137L4.24353 30.985C5.30433 31.6351 6.5201 31.9338 8.05038 32.0793C9.56869 32.2236 11.4782 32.2228 13.9488 32.2228V30.6144ZM0.232823 18.5068C0.232823 20.9774 0.231974 22.8869 0.376336 24.4052C0.521836 25.9355 0.820494 27.1513 1.47055 28.2121L2.84193 27.3717C2.37276 26.6061 2.11181 25.6655 1.9775 24.253C1.84206 22.8285 1.84121 21.0086 1.84121 18.5068H0.232823ZM5.08391 29.6137C4.17015 29.0537 3.40188 28.2855 2.84193 27.3717L1.47055 28.2121C2.16313 29.3423 3.11335 30.2925 4.24353 30.985L5.08391 29.6137ZM18.5059 32.2228C20.9766 32.2228 22.886 32.2236 24.4043 32.0793C25.9346 31.9338 27.1504 31.6351 28.2112 30.985L27.3708 29.6137C26.6052 30.0828 25.6646 30.3438 24.2521 30.4781C22.8276 30.6135 21.0077 30.6144 18.5059 30.6144V32.2228ZM29.6128 27.3717C29.0528 28.2855 28.2846 29.0537 27.3708 29.6137L28.2112 30.985C29.3414 30.2925 30.2916 29.3423 30.9842 28.2121L29.6128 27.3717ZM27.3708 7.39992C28.2846 7.95987 29.0528 8.72814 29.6128 9.6419L30.9842 8.80152C30.2916 7.67134 29.3414 6.72112 28.2112 6.02854L27.3708 7.39992ZM13.9488 4.79081C11.4782 4.79081 9.56869 4.78996 8.05038 4.93432C6.5201 5.07982 5.30433 5.37848 4.24353 6.02854L5.08391 7.39992C5.84952 6.93075 6.79007 6.6698 8.20262 6.53549C9.62713 6.40005 11.447 6.3992 13.9488 6.3992V4.79081ZM1.84121 18.5068C1.84121 16.005 1.84206 14.1851 1.9775 12.7606C2.11181 11.3481 2.37276 10.4075 2.84193 9.6419L1.47055 8.80152C0.820494 9.86232 0.521836 11.0781 0.376336 12.6084C0.231974 14.1267 0.232823 16.0361 0.232823 18.5068H1.84121ZM4.24353 6.02854C3.11335 6.72112 2.16313 7.67134 1.47055 8.80152L2.84193 9.6419C3.40188 8.72814 4.17015 7.95987 5.08391 7.39992L4.24353 6.02854ZM13.2699 1.8421H21.4252V0.233708H13.2699V1.8421ZM21.4252 1.8421C22.7303 1.8421 23.6249 1.84395 24.2964 1.93807C24.9412 2.02845 25.2601 2.18976 25.4854 2.42467L26.6462 1.31129C26.0753 0.716124 25.3554 0.462392 24.5196 0.345253C23.7106 0.231855 22.683 0.233708 21.4252 0.233708V1.8421ZM13.2699 0.233708C10.7402 0.233708 8.77565 0.23251 7.22258 0.407932C5.6524 0.585288 4.40726 0.951352 3.35288 1.74999L4.32402 3.0321C5.05609 2.47759 5.97834 2.16709 7.4031 2.00616C8.84498 1.8433 10.7029 1.8421 13.2699 1.8421V0.233708ZM1.84121 13.7911C1.84121 11.1172 1.84223 9.17375 1.99914 7.66381C2.15469 6.16704 2.45616 5.19111 2.99473 4.4183L1.67517 3.4987C0.915807 4.58833 0.568305 5.87199 0.399372 7.49756C0.231806 9.10997 0.232823 11.1516 0.232823 13.7911H1.84121ZM3.35288 1.74999C2.70784 2.23857 2.14192 2.82894 1.67517 3.4987L2.99473 4.4183C3.36633 3.88508 3.81516 3.41753 4.32402 3.0321L3.35288 1.74999ZM27.6648 5.789C27.6597 4.7583 27.6372 3.8946 27.514 3.18787C27.3873 2.46068 27.143 1.82923 26.6462 1.31129L25.4854 2.42467C25.6884 2.63632 25.8364 2.9299 25.9295 3.46407C26.0262 4.0187 26.0512 4.75269 26.0564 5.79694L27.6648 5.789ZM0.232823 13.7911C0.232823 15.285 0.202224 16.626 0.233091 17.769L1.84089 17.7256C1.81074 16.6088 1.84121 15.3416 1.84121 13.7911H0.232823ZM30.6581 20.8788H21.7511V22.4872H30.6581V20.8788ZM16.8041 17.5402C16.8041 20.2723 19.019 22.4872 21.7511 22.4872V20.8788C19.9072 20.8788 18.4125 19.384 18.4125 17.5402H16.8041ZM18.4125 17.5402C18.4125 15.6963 19.9072 14.2015 21.7511 14.2015V12.5931C19.019 12.5931 16.8041 14.808 16.8041 17.5402H18.4125ZM25.8939 16.736H21.7511V18.3444H25.8939V16.736ZM18.5059 6.3992C20.6053 6.3992 22.2278 6.39955 23.5447 6.4808C24.8607 6.56201 25.8107 6.72155 26.5751 7.01186L27.1461 5.50825C26.1594 5.13351 25.0222 4.96053 23.6437 4.87547C22.2662 4.79046 20.5869 4.79081 18.5059 4.79081V6.3992ZM26.5751 7.01186C26.8625 7.12102 27.1248 7.24918 27.3708 7.39992L28.2112 6.02854C27.8753 5.82271 27.5223 5.65111 27.1461 5.50825L26.5751 7.01186ZM26.0564 5.79297V6.26005H27.6648V5.79297H26.0564ZM21.7511 14.2015H31.3333V12.5931H21.7511V14.2015ZM32.2219 18.5068C32.2219 16.415 32.2222 14.729 32.1359 13.3472L30.5306 13.4475C30.6131 14.7679 30.6135 16.3963 30.6135 18.5068H32.2219ZM32.1359 13.3472C32.0178 11.4586 31.734 10.0251 30.9842 8.80152L29.6128 9.6419C30.1555 10.5276 30.4179 11.6434 30.5306 13.4475L32.1359 13.3472ZM30.6135 18.5068C30.6135 19.7023 30.6135 20.7453 30.5981 21.6696L32.2063 21.6963C32.2219 20.756 32.2219 19.6984 32.2219 18.5068H30.6135ZM30.5981 21.6696C30.5489 24.6379 30.3344 26.1941 29.6128 27.3717L30.9842 28.2121C31.9637 26.6137 32.1576 24.6317 32.2063 21.6963L30.5981 21.6696ZM30.6581 22.4872H31.4022V20.8788H30.6581V22.4872Z" fill="#656565"/>
        </g>
      </svg>
      <div>
        <p>کیف پول</p>
        <p class="text-[12px]">
          {{ eArabic(Math.floor(profileStore.profileData.wallet.balance)) }} تومان
        </p>
      </div>
    </div>

  </div>

  <!---roles check----->

  <RouterLink to="/policy" target="_blank" class="w-full text-right block text-underlined mt-2 text-blue-500" dir="rtl">برای مطالعه شرایط و قوانین لوگانو کلیک کنید.</RouterLink>

  <div class="flex justify-start gap-3 text-zinc-600 mt-2" dir="rtl">
    <input type="checkbox" class="w-[18px]" name="policy" @change="policychange" value="24" />
    <p>قوانین لوگانو را مطالعه کردم و با آنها موافقت میکنم</p>
  </div>

  <button class="w-full bg-sky-custom text-center py-3 rounded-md mt-3 text-white block" @click.prevent="projectStore.buyProject(paymentMethod, props.amount)" v-if="!projectStore.buyProjectLoading" >
    پرداخت
  </button>
  <!----- loader ------->
  <div role="status" class="flex justify-center mt-8" v-else >
    <svg aria-hidden="true" class="w-8 h-8 mr-2 text-gray-200 animate-spin dark:text-gray-600 fill-sky-500" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"/>
      <path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"/>
    </svg>
    <span class="sr-only">Loading...</span>
  </div>

</template>

<script setup>

import {useProjectStore} from "~/store/projects";
import {useProfileStore} from "~/store/profile";

const walletSvg = ref(null);
const walletCircle = ref(null);
const onlinePaymentSvg = ref(null);
const onlineCircle = ref(null)
const projectStore = useProjectStore();
const profileStore = useProfileStore();
const paymentMethod = ref(1)


const policychange = (e) => {
  console.log(e.target.checked)
  if (e.target.checked === false) {
    projectStore.policyCheck = false;
  }else {
    projectStore.policyCheck = true;
  }
}


const props = defineProps([
    "amount"
])
console.log(props)

const walletPaymetntSelect = (e) => {
  e.currentTarget.classList.add("fill-active");
  walletCircle.value.classList.add("bg-sky-custom");
  walletCircle.value.classList.remove("border-[3px]");
  onlinePaymentSvg.value.classList.remove("fill-active");
  onlineCircle.value.classList.remove("bg-sky-custom");
  onlineCircle.value.classList.add("border-[3px]");
  paymentMethod.value = 2;
}

const onlinePaymetntSelect = (e) => {
  e.currentTarget.classList.add("fill-active");
  walletCircle.value.classList.remove("bg-sky-custom");
  walletCircle.value.classList.add("border-[3px]");
  onlineCircle.value.classList.add("bg-sky-custom");
  onlineCircle.value.classList.remove("border-[3px]");
  paymentMethod.value = 1;
}

function eArabic(x) {
  return x.toLocaleString('ar-EG');
}

</script>

<style scoped>

.gray-fill path {
  fill: gray;
}
.gray-fill circle {
  stroke: gray;
}

.fill-active path {
  fill: #1b9eb2;
}
.fill-active circle {
  stroke: #1b9eb2;
}

</style>